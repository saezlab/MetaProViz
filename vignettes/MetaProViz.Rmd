---
title: "TutorialR"
author: "Christina Schmidt, Dimitrios,..."
date: "24 November 2022"
output:
  html_document:
    toc: true
    toc_depth: 4
    toc_float: true
editor_options: 
  chunk_output_type: console
---

# Usage MetaProViz
***MetaProViz*** (Authors. 2023. Journal. DOI: ) enables the user to pre-process metabolomics data including consumption-release (CoRe) data and contains different visualisation methods to extract biological interpretable graphs.\
This is the tutorial showcasing the different functionalities MetaProViz offers.\
For this we downloaded two publicly available datasets and use them as the example data for MetaProViz.

# Installation
[MetaProViz](Add to bioconductor) is an R package distributed as part of the Bioconductor project. To install the package, start R and enter:\
\
```{r bioconductor_install, eval=FALSE}
install.packages("BiocManager")
BiocManager::install("MetaProViz")
```
\
Alternatively, you can instead install the latest development version from [GitHub](https://github.com/ChristinaSchmidt1/MetaProViz) with:

```{r github_install, eval=FALSE}
BiocManager::install("ChristinaSchmidt1/MetaProViz")
```


## Libraries
[MetaProViz](Add to bioconductor) can be imported as:

```{r load_library, message=FALSE}
library(MetaProViz)

# Extra dependencies:
library(dplyr)
library(tidyverse)
```


# Input data
 toy datasets we have downloaded from publicly available sources:

## 1. CoRe experiment 
The raw data is available via [metabolomics workbench study ST002226](https://www.metabolomicsworkbench.org/data/DRCCMetadata.php?Mode=Study&StudyID=ST002226&StudyType=MS&ResultType=1) were exometabolomics of the human epithelial renal cell line HK2 and clear cell renal cell carcinoma (ccRCC) cell lines 786-O, 786-M1A, 786-M2A, OS-RC-2, OS-LM1 and RFX-631 all cultured with the Plasmax media were performed.\
Here we included the raw peak data as toy data using the trival metabolite name in combination with the KEGG ID as the metabolite identifiers.

The mapping file was downloaded from: https://github.com/saezlab/ocean/blob/marco_paper/data/mapping_table.RData

Load the CoRe toy data:
```{r}
DF <- read.csv("data/MS51_RawPeakData.csv", check.names = FALSE)%>%
  column_to_rownames("code")

DF_t <- as.data.frame(t(DF[,-c(1:5)]))%>%
  rownames_to_column("metab")

DF_t <- merge(mapping_table, DF_t, by="metab", all.y=TRUE)




# Once toy data is part of the package we can use: data <- get_toy_data()
#inputs_dir <- system.file("extdata", package = "MetaProViz")
#data <- readRDS(file.path(inputs_dir, "MS51_RawPeakData.rds"))

```

## 2. The Cancer Cell Line Encyclopedia (CCLE)

https://www.nature.com/articles/s41591-019-0404-8#Sec31

Let's deposit the data as part of the package:
https://r-pkgs.org/data.html

Load the CCLE toy data:
```{r}

```



# Run MetaProViz functions

## Processing intracellular metabolomics
ccRCC data from 

## Processing CoRe experiment

1. MetaProViz::Preprocessing()


```{r}

```



## Biological clustering
ccRCC CoRe data

## Visualisation
No replicates




# Session information
```{r}
sessionInfo()
```


# Bibliography
```{r vignetteBiblio, results = "asis", echo = FALSE, warning = FALSE, message = FALSE}
## Print bibliography
PrintBibliography(bib, .opts = list(hyperlink = "to.doc", style = "html"))
```

